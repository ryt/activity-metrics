<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>acme: Activity Metrics Web Dashboard</title>
  <style>
    body { margin: 0; font: 14px sans-serif; }
    h2 { margin: 0; padding: 8px 16px; background: #ddd; border-bottom: 1px solid #bbb; }
    h2 a { color:#000; text-decoration: none; }
    h2 a.hide { font-size: 12px; font-weight: bold; margin-left:10px; }
    h2 a.hide:hover { text-decoration: underline; }
    h2 a.cur { font-size: 14px; }
    h4 { margin-bottom:10px; }
    a { color: #000; text-decoration: none; }
    a:hover { text-decoration: underline; }
    a.dotfiles { color:#777; }
    .address { font-family: monospace; padding: 8px 16px; border-bottom: 1px solid #aaa; background: #eee; }
    .address a { text-decoration: underline; }
    .address span { color:#777; }
    .address a:last-child { font-weight: bold; }
    .error { color: #555; font-family: monospace; padding: 4px 0; }
    .noncsv-plain { margin: 0; padding: 4px 0; }
    .dir-list, p { padding: 12px 16px; font-family: monospace; font-size: 14px; }
    .dir-list .error { padding: 8px 0; }
    .dir-item { padding: 4px 0; }
    .file-show { padding:16px; }
    .file-show .error { margin-top: -4px; }
    .csv-table { border-collapse: collapse; font-size:13px; }
    .csv-table th, .csv-table td { border: 1px solid #ccc; padding: 8px; font-weight: normal; }
    .csv-table th { background: linear-gradient(#f9f9f9 0% 50%, #f2f2f2 50% 100%); }
    .csv-table td { }
    .table-outer { max-width:1200px;max-height:600px;overflow:scroll; }
    .filters { margin:0 0 10px; }
  </style>
</head>
<body>

    <h2>
      <a href="/?{{ view.query_m }}">acme</a>
      <a class="hide {{ 'cur' if view.page == 'index' }}" href="/?{{ view.query_m }}">dashboard</a>
      <a class="hide {{ 'cur' if view.page == 'run' }}" href="/run?{{ view.query_m }}">run</a>
      <a class="hide {{ 'cur' if view.page == 'garmin' }}" href="/garmin?{{ view.query_m }}">garmin</a>
    </h2>

  {% if view.page == 'run' %}

    <div class="address">
      {{ view.getm or 'Empty' }} &rarr; <a href="/?{{ view.query_m }}">Dashboard</a> <span>/</span> <a href="/run?{{ view.query_m }}">run</a> <span>/</span> <a href="/run/{{ view.command }}?{{ view.query_m }}">{{ view.command }}</a>
    </div>

    <div class="dir-list">
      {{ view.message }}
    </div>

  {% elif view.page == 'garmin' %}

    <div class="address">
      {{ view.getm or 'Empty' }} &rarr; <a href="/?{{ view.query_m }}">Dashboard</a> <span>/</span> <a href="/garmin?{{ view.query_m }}">garmin</a> <span>/</span> <a href="/garmin/{{ view.command }}?{{ view.query_m }}">{{ view.command }}</a>
    </div>

    <div class="dir-list">
      {{ view.message }}
      {{ view.output_html | safe }}
    </div>

  {% else %}

    <div class="address">
      {{ view.getm or 'Empty' }} &rarr; <a href="/?{{ view.query_m }}">Dashboard</a> <span>/</span> 
    </div>


    <div class="dir-list">
      {% if view.getm %}
        Using current metrics directory.
      {% else %}
        Please specify a metrics directory with the <i>m</i> parameter. /?m=/Path/to/Metrics
      {% endif %}
    </div>

  {% endif %}

</body>
</html>